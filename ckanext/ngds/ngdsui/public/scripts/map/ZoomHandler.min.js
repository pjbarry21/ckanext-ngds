var zoom_handler=ngds.Map.zoom_handler=function(b){(function(){if(b===null||typeof b==="undefined"){throw"Invalid layer"}})();var b=b;var d=new ngds.Map.BoundingBox();d.construct_from_leaflet_shape(b);var e=d.get_leaflet_bbox();b._shown=true;var a=ngds.Map.handlers||(ngds.Map.handlers=[]);var c=function(){var f=ngds.Map.map.getBounds();var g=f._southWest.lat;var h=f._southWest.lng;var n=f._northEast.lat;var o=f._northEast.lng;var k=e._southWest.lat;var l=e._southWest.lng;var i=e._northEast.lat;var j=e._northEast.lng;if(typeof ngds.util.state.hidden_t!=="undefined"&&typeof ngds.util.state.hidden_t[0]!=="undefined"){return}var m=_.map(ngds.util.state.hidden_t,function(p){return p._leaflet_id});if((l<h)&&(j>o)&&(k<g)&&(i>n)&&b._shown===true){if(_.contains(m,b._leaflet_id)===true){return}b._shown=false;ngds.log("Hiding layer : "+b,b);ngds.Map.get_layer("geojson").removeLayer(b)}else{if((l>h)||(j<o)||(k>g)||(i<n)&&b._shown===false){if(_.contains(m,b._leaflet_id)===true){return}ngds.log("Showing layer : "+b,b);ngds.Map.get_layer("geojson").addLayer(b);b._shown=true}}};ngds.Map.map.on("zoomend",c);ngds.Map.handlers.push(c);ngds.log("Pushing zoom handler to : "+ngds.Map.handlers)};zoom_handler.clear_listeners=function(){if(typeof ngds.Map.handlers!=="undefined"){for(var a=0;a<ngds.Map.handlers.length;a++){ngds.Map.map.off("zoomend",ngds.Map.handlers[a]);ngds.log("Removing zoom handler")}}ngds.Map.handlers=[]};